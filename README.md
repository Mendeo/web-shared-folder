# Static Web Server
Разработал для своих нужд простой сервер на node js, чтобы он отдавал статику. Сторонние библиотеки не использовались.

**Не используйте эту программу на реальных серверах, смотрящих в интернет - сервер не тестировался на безопасность!**

Тут нет кэширования - это важно для веб разработки.
Файлы отдаются через файловые потоки, поэтому можно использовать для отдачи больших файлов.
Такой сервер может пригодиться для тестирования при разработке в веб. Также этот сервер может пригодиться, если нужно быстро расшарить папку по сети.

## Запуск

```
node server.js <Путь к папке с веб сайтом> <port> [<key> <cert>] [<username> <password>]
```
Путь может быть относительным или абсолютным. **Если в заданной папке не будет файла "index.html", то сервер запустится в режиме отображения содержимого директории.** В этом случае при запросе к серверу будет отдаваться веб страница с сылками для скачивания файлов, лежащих в этой папке.  
В квадратных скобках указаны необязательные параметры:  
К серверу можно подключить ssl сертификат, чтобы он работал через https.  
\<key\> и \<cert\> - Путь к файлу закрытого ключа, и путь к файлу сертификата соответственно. Если эти параметры заданы, то сервер будет использовать https вместо http.  
\<username\> и \<password\> - Включает базовую HTTP аутентификацию с заданными именем пользователя и паролем.  

**Все параметры можно задавать также в переменных окружения: SERVER_ROOT_PATH, SERVER_PORT, SERVER_KEY, SERVER_CERT, SERVER_USERNAME, SERVER_PASSWORD.** Параметры, заданные в коммандной строке имеют более высокий приоритет.  
Кроме того, **сервер можно запустить в режиме кластера** путём задания переменной окрежения SERVER_USE_CLUSTER_MODE=1. В этом будут созданы дочерние процессы nodejs по числу ядер процессора. Этот режим позволяет задействовать в работе сервера весь ресурс процессора, но при этом кратно возрастает потребление опертивной памяти. Для режима кластера имеется возможность задать переменную окружения SERVER_SHOULD_RESTART_WORKER=1. Это приведёт к автоматическому перезапуску дочернего процесса в случае его непредвиденного завершения.